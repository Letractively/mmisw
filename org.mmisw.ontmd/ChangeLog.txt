org.mmisw.ontmd: Ontology Metadata Manager and Voc2RDF
Carlos Rueda  -  http://marinemetadata.org

ChangeLog

2009-04-07
	Implemented issue #84: "allow user-given namespace (URI) in voc2rdf"
	VocabPanel.OntologyUriPanel handles the information about the resulting URI for the ontology.
	The user can now specify the complete URI and later, if desired, revert to the automated 
	handling.

2009-04-07
	Fixed issue #120: "title doesn't get carried forward"
	Problem was that Omv.name was assigned BOTH the class name and the fulltitle.
	Only the fullTitle is now assigned.
	
2009-04-06
	Fixed issue #119: "Allow empty fields in non-required columns"
	This also required to generate "" column values for the missing fields so the original
	voc2rdf scheme to make the conversion (which is based on the com.infomata.data library)
	works with no ArrayOutOfBoundsException's. 
	
2009-04-01
	- setReadOnly(!enabled) instead of setEnabled(enabled) for text fields; this allows the
	  user to select the text even if it's not editable.

2009-03-31    voc2rdf 1.2.0.beta2
	- oops, I introduced a bug with my latest changes: individuales were not put in the
	  namespace appropriately (I forgot to use the namespace (_ns) in Converter.createIndividual()
	  after the change in getGoodName(), which now does not include the namespace itself)
	  -> fixed.
	  
	
2009-03-28,29:   voc2rdf 1.2.0.beta1

	- Many updates to Voc2RDF
		- More metadata captured (title, creator, description, authority)
		- Button convert to RDF now opens a dialog (No tab for conversion)
		- class & terms now in a tab (in preparation for multiple classes)
				
		- New editable, spreadsheet-like table for the terms:
			- The editable table is now the main interface for capturing the terms
			- A new CSV button displays the current table in CSV format; the user
			  can use the text area to update the contents and re-import into the table.

		
2009-03-21
	Issue 99: "Normalize theme/topic/class throughout interface"
	http://code.google.com/p/mmisw/issues/detail?id=99
	
	Renamings before actual change to the function of the code:
	- "shortName" is actually "resourceType: The current "shortName"-based names in the
	  code actually refer to the "resourceType" concept. (But note that OmvMmi.shortNameUri
	  refers to the URI of the resource type (captured in Omv.acronym).)
	- "mainClass" also refers to "resourceType"
	So the renamings were applied in these places:
		  	BaseInfo: shortNameUri -> resourceTypeUri
		  	MetadataGroupPanel: shortName* -> resourceType*
		  	MdHelper: mainClassAttrDef -> resourceTypeAttrDef 
		  	Voc2RdfBaseInfo: mainClass -> resourceTypeAttrDef
		  	
	Some refactoring and some minor adjustments:
	- new ResourceTypeWidget to handle the resource type set of fields
	- FieldWithChoose as a class in a separate file
	- TLabel: now, internal click does NOT close the tooltip dialog

	NOTE: Implemented my 3/21/09 proposal in issue #99: basically that the resourceType elements
	are used to provide for the "Class" related fields. I assign the labels and 
	tooltips accordingly. Also, there is a single field for the ontologyUri.
	This class related info is captured in the ontology metadata with thre Omv.acronym and
	OmvMmi.shortNameUri, as it is currently done in OntMd, so OntMd will detect those in the
	subsequent submission.
	

		  	
	- Next:
	  - OntMd's review operation uses shortName to do some checks; this refers to the actual shortName 
	  concept BUT it's using the value of Omv.acronym (ie., resourceType); so, continue with adding
	  the field for short name..
	
	
2009-03-20
	- some documentation updates.
	- More code clean-up: deprecating Voc2RdfService* types; the voc2rdf operations are now
	  provided through the ontmd service as well.
	

2009-03-19
	- Completed fix of issue #45: "include URIs for Topic in the ontmd Topic URI -- 
	  Review operation was removing the topic URI field value.
	  1.0.8.beta (20090319092940)
	  
	- Fixed Issue 109: "second review not asked after further changes"
	  Merged the "Review" and "Upload" actions into a single "Review and Upload" button. 
	  Complementary to this, the dialog for the successful review result now includes a button "Upload".
	  The user can either proceed with the upload operation or close the review dialog and continue 
	  editing the metadata.
	  
	  
	- Now, dynamic load of supporting vocabularies to drive drop-down menus. This way, the lists
	  are always displayed with the most recent contents. Previously, these lists were only
	  prepared at deployment time!
	  Also, the options are sorted by name (ignoring case).
	  Also, add sugestedBox to faciliate selection of option from the listBox.
	  1.0.9.beta (20090319164948)
	  
	 
2009-03-18
	- Issue #45: "include URIs for Topic in the ontmd Topic URI field"  -- 1.0.8.beta (20090318234714)
	  See OndMdServiceImpl, MetadataGroupPanel, Option, MdUtil, MdHelper.
	  - OmvMmi.shortNameUri is now associated with Omv.acronym 
	  - OndMdServiceImpl.prepareOntologyInfo(File file, OntologyInfo ontologyInfo): 
	  	if OmvMmi.shortNameUri is part of the list of attributes, then it also assigns OmvMmi.shortNameUri
	  - MetadataGroupPanel: various adjustments.
	    
	- New version.properties as the single point to define the version for this application
	  (both the back-end services and the front-ends). build.xml translates this to the 
	  application via the web.xml (which is read by Config). Also, a "build number", which 
	  is a timestamp, is used for the full version. An AppInfo object is used to share the
	  application info (version) between server and client. 
	  
	- Now, build.properties include many of the (previously) hard-coded parameters. build.xml 
	  updates the web.xml accordingly and then Config makes the params available to the code. 
	  

2009-03-17
	- Using Voc2RDF, I just created and submitted the following vocabularies (with the
	  current values in the authorities.csv and resourcetypes.csv, respectively):
	       http://mmisw.org/ont/mmi/20090317T183911/authority
	       http://mmisw.org/ont/mmi/20090317T173755/resourcetype
	  A next step is to use these ontologies (instead of the CSV files) to drive the 
	  corresponding drop-down menus.
	  
	  
	- Fixed the ``,,'' issue in voc2rdf: issue #87	
	
	-  Code clean-up:
		- Moved MdHelper from org.mmisw.ont.util/ to org.mmisw.ontmd.gwt.server/
		- New class org.mmisw.ontmd.gwt.server/MdUtil with utilities for MdHelper.
		- Removed org.mmisw.ont.{Omv,OmvMmi} from this project; now, the ont generated
		  library org.mmisw.ont.vocabulary.jar is used instead.
		  
		  
	- Issue #106: "Use ontologies to drive drop-down menus"
	  Started changes to implement this. See Config, MdHelper and MdUtil.
	  Note that Config defines the URI of the class of the vocabulary to be loaded. However,
	  TODO perhaps in a future version multiple classes could be supported in the
	  ontology, so this scheme would have to change.     (1.0.4.beta (20090317))
	  
	  
	- Partially fixed Issue #45: "include URIs for Topic in the ontmd Topic URI field"
	  1.0.5.beta (20090317)
	  See MetadataGroupPanel, Option, MdUtil, MdHelper.
	  
	- Using style OBF to reduce size of javascript (issue #108: "ontmd client: 1.0MB per load")
	
	
2009-03-13
	- Fixed http://code.google.com/p/mmisw/issues/detail?id=98:
	                "new version allows the shortName and authority to be changed"
	                
		- See OntMdServiceImpl._checkUriKeyCombinationForNewVersion
		  Now, OntMd doesn't allow the shortName (resource type) or the organization
		  abbreviation to be changed when a *new version* submission is attempted.
		  
		  
	- Implemented http://code.google.com/p/mmisw/issues/detail?id=87:
					"Ability to have Voc2RDF handle quoted strings for table preview"
		- See VocabPanel.parseLine(), which is used now in updateTabularView().
		   Note: it only handles the double quote (") case.
		- This is Voc2RDF 2.0.0.beta5
		
	                
2009-03-12
	- Fixed http://code.google.com/p/mmisw/issues/detail?id=63:
	                Matching auth+topic not detected as potential update
		- Added ontologyId attribute to the OntologyInfo class, such that the "review"
		  operation has access to it, and thus proceed with the appropriate check in
		  case ontologyId == null (meaning the review is for a *new* submission, not a
		  new version).
		  See OntMdServiceImpl._checkNoPreexistingOntology
		- Note, the _checkNoPreexistingOntology check is repeated in the "upload" operation
		  in case there is a new registration done by other user in the meantime (from when the
		  "review" was done). Of course, we are NOT completely solving the potential concurrency 
		  problem with this re-check; we are just reducing the chances of that event.

2009-03-11
	- Added sample.build.properties to be used as a template for the actual build.properties
	  (which is now removed from the SVN repository), and so facilitate build and deployment.
	  In particular, I'm using this approach to set up logging to an ontmd.log file under
	  the servlet container's logs directory. This follows the same strategy as in the
	  "ont" project for ontology and term URI resolution.
	- Using commons logging in server classes. 

		  

2009-03-10

	- Investigating http://code.google.com/p/mmisw/issues/detail?id=63:
	                Matching auth+topic not detected as potential update
	
		-Created a base vocabulary:
	      http://mmisw.org/ont/mmitest/20090310T221213/parametro


	- Fixed http://code.google.com/p/mmisw/issues/detail?id=97: 
	    Left and right borders are not displayed in firefox 
	  The fix (well, workaround) was to remove ``table { empty-cells: hide; }'' in Main.css.
	  



2008-11-14   -   Voc2RDF 2.0.0.beta4

	Issue 27: URIs have # signs instead of / before terms
	http://code.google.com/p/mmisw/issues/detail?id=27
	
	- JenaUtil2. Converter, OntMdServiceImpl:
	  Re-setting fragment separator to / and doing necessary adjustments to start
	  using / in general.
	  
	oops: some URIs are coming with trailing # in the links in the metadata panel.
	For now, any trailing framegments are just removed before creating the links,
	see MetadataPanel.NewUri.setUri(String uri, boolean link).

	  ok: updated the issue with some instructions to verify the change.
	
	
	
	- weird behavior on my station: couldn't "load" a local file in the ontmd editor;
	  seemed like a cache issue with my browser.  (no problem now).
	  
	 
	- Voc2RDF: now transfers the sessionId/userId information from the given parameters
	  (eg, from ORR front-end) to the ontmd tool so the user won't have to log in again.
	  Fixes issue 30: http://code.google.com/p/mmisw/issues/detail?id=30
	  
	  
2008-11-12

	- Done Request 46: allow to manually specify version of submitted ontology (internal)

	- Done 41: add cdip namespace, and others.
	  Ok, ontmd is using the following text file as external resources to get the authorities
	  and the resources types:
		    authorities.csv
		    resourcetypes.csv
	  See Config.java
	   
	
	Voc2RDF (2.0.0.beta2)
	Re. 43: Handle non-UTF8 inputs 
	- Voc2RDF: New _convertToUtf8(String str) utility in Converter.
	  FIXME implementation is rather simplistic:
	     return new String(str.getBytes(), "UTF-8"))
	  A better approach is to determine the actual original charset and
	  then do the conversion to UTF-8.
	  
	  
2008-11-11 (1.0.0.beta)    (Happy B-day Ini!)

	- Declaring beta status!
	
	- Using new Voc2RDF logo created by Paul (thanks!).


2008-11-10 (1.0.0.alpha7)
	- Fixed 38: show the "owl" and "html" links
	  --> include hot links in the read-only view of a registered ontology
	
2008-11-09 (1.0.0.alpha7)

	- Voc2RDF functionality re-merged in this project.

	- New tooltip handling via an "?" icon.
	
	- JenaUtil2: with some of the methods in JenaUtil but with some adjustments.
	  Initially intended to handle the fragment separator, which is '#' always in
	  the original version. Currently, JenaUtil2 still uses '#' but already
	  factors out this element so it's easier to test for a different fragment
	  separator, especifically, '/'.
	  Preliminary tests, show that the Jena library handles the '/' separator
	  differently than with '#'. For example, elements in the base namaspace are
	  nicely identified with relative references when '#' is used, but not
	  with '/'.  This may be just a cosmetic difference but I haven't tested
	  this thoroughly yet (especially in terms of transferring elements from a
	  given ontology to the new to be uploaded in the repository).
	  
	- Improved handling of the "_map" suffix in the shortName.
	

2008-11-06 (0.1.alpha6)

	- OntologyPanel:  Since "load registry file" is not implemented directly,
	  I removed the related GUI elements (via a flag, so I can return to that later
	  if necessary). Note: the user would use the main front-end to choose a
	  registered ontology, and then ontmd will be called to proceed 
	  with the creation of the new version.
	
	- Passing call parameters to the initialization (getBaseInfo) to better logging
	  on the server side.
	  
	- Now handling aquaportal versions: a parameter "ontologyId", if given, will be
	  used to perform the final REST upload call, so the new version gets linked with
	  the same family of versions for the given ontology.
	
	- Added authority: mvco: Martha's Vineyard Coastal Observatory
	- Main and BaseInfo: better handling of possible error while getting BaseInfo.
	
	- Fixed link to HTML version after upload. (it uses "?form=html" mechanism).
	
	
2008-11-05
	- Fixed Issue 25: Visiting ontology=>new without logging in does not require login.
	  In general, the logic to handle initialization is much clear now. 
	  See MainPanel() constructor.
	  
	- various GUI improvements.
	
2008-11-04 (0.1.alpha5)
	- Message improvements
	- Better integration with voc2rdf
	
	- Everything working pretty nicely! :-)
	
	TODO: Unify replicated code with voc2rdf !!
	
	
	
2008-11-03 (0.1.alpha4)

	- Assign omv:creationDate with format yyyy-MM-dd'T'HH:mm:ssZ
	
	- Fixed the following: repeated attributes will come out in the resulting ontology
	(eg, multiple omv:uri entries) when the original resource already contains those
	attributes. Now, any pre-exisiting attributes that are given new values are
	not tranferred from the original source, of course.
	
	- shortName attribute handled as a special case (time contrains force to take
	  quick, not-so-elegant solutions :( 
	
	- upload: setting file extension to .owl per aquaportal requirement
	
	- hot link to uploaded ontology upon succesful submission.
	
	
2008-11-02

	- Fixed Issue 10: load a registered ontology
		- This is now completed for the case when the URI is passed as a parameter
		  ontologyUri=uuuu along with the new parameter "_edit" which should be
		  set to "_edit=y" to allow the edition of a new version of the ontology.
		  
		  (Note: the button to "load a registered ontology" is not yet implemented
		  and perhaps it shouldn't at least initially, the reasons being:
		  	- Main entry point to create a new version is the Aquaportal front-end;
		  	- This way, the user is already logged-in and in fact she can only launch
		  	  the edition of her own ontologies, so this control is already in place.
		  	  
	- Username is not shown if ontmd is launched with the userId and sessionId params.
			
		
	- some code clean-up:
		-MdHelper: removed unused stuff (AttributeValue class, title).
		
	- Fixed Issue 11: Assign DC from the Omv and OmvMmi props -- and vice versa!
	  This happens at two moments:
	  	- When an ontology is loaded: Existing DC attributes are used to fill in
	  	  missing MMI attributes.
	  	- When the "review" process is executed: Existing MMI attributes are used 
	  	  to fill in missing DC attributes.
	  Equivalences were defined in MdHelper.
	  
	- Improved error checking and diagnostics upon initial loading of an ontology. 
		
2008-11-01
	- MetadataPanel doesn't show the original base URI anymore; this info is already
	  provided in the Ontology panel.
	  
	- Fixed 18: "namespace not updated". Main changes in OntMdServiceImpl:
	  - _replaceNameSpace(OntModel model, String oldNameSpace, String newNameSpace)
	    updates all statements having any element in the original namespace to be in the
	    new namespace.
	  - the pre-existing owl:Ontology, if any, is replaced with a new one that will have
	    the appropriate URI.
	  

	- Improved login interface.
	
2008-10-31
	- Fixed 17: example still data included.
	  The general behavior was that resetting to original values was incorrect.
	  Now, an OntologyInfo object two maps, one for the original values, and the
	  other for new values (assignied during the editing session, either manually
	  or by running the "example" actions).

	- several improvements.

2008-10-30
	- UploadServlet: use File.createTempFile with sessionId; the previous scheme
	  was buggy!
	- Fixed: 15: preview operation not idempotent
	- Also fixed: multiple owl:Ontology sections: now the esiting one is used
	  to add/updated the metadata attributes.
	  
	- ontologyUri= parameter: it is handled by just displaying the metadataPanel
	  in no-editing mode:
	  	- no buttons
	  	- no required marks (*)
	  	- no listBoxes, just plain textboxes
	  this functionality can be used in:
	  	- the aquaportal front-end (already called from there)
	  	- HTML output in the Ont URI resolver (TODO)


2008-10-29 
	- submit new ontology starting from local file:
		basic steps implemented: load-edit-review-upload

TODOS:
	- load a registered ontology
	- Assign DC from the Omv and OmvMmi props
	
2008-10-28 (started; based on voc2rdf)

	